{% extends 'layout.html' %}

{% block title %}{{ title }}{% endblock %}
{% block description %}{{ description }}{% endblock %}

{% block content %}
<main class="container mx-auto mt-10 mb-10">
    <section>
        <h1 class="text-3xl text-center">{{ user.forename }} {{ user.surname }}</h1>
        <p class="text-center text-gray-500">Joined: {{ user.joined}}</p>
        {% if user.profile_pic %}
        <div class="w-1/3 m-auto">
            <img alt="Profile Picture" class="mx-auto" src="{{doc_root}}uploads/{{user.profile_pic}}">
        </div>
        {% else %}
        <div class="w-1/4 m-auto">
            <img alt="No image available" class="mx-auto" src="{{doc_root}}uploads/placeholder.jpg">
        </div>
        {% endif %}
        {% if session.id == user.id %}
        <div class="flex justify-center">
            <a class="text-white bg-pink-600  hover:bg-blue-600 p-2 rounded-md m-2" href="{{doc_root}}edit_user_profile.php">
                Edit Profile</a>
            <a class="text-white bg-pink-600  hover:bg-blue-600 p-2 rounded-md m-2" href="{{doc_root}}edit_article.php">
                Add Article</a>
            <a class="text-white bg-pink-600  hover:bg-blue-600 p-2 rounded-md m-2" href="{{doc_root}}edit_profile_pic.php">
                Edit Profile Picture</a>
        </div>
        {% endif %}
    </section>
    <section class="flex flex-wrap p-8">
        {% for article in articles %}
            <article class="w-full p-4 flex justify-between flex-col sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/6 mb-4">
                <a href="article/{{ article.id }}">
                    <img src="{{ doc_root }}uploads/{{ article.image_file ?? 'blank.png' }}" alt="{{ article.image_file }}">
                    <h2 class="text-blue-500 text-2xl pt-3 pb-1.5">{{ article.title }}</h2>
                    <p class="text-gray-500 pb-2.5">{{ article.summary }}</p>
                </a>
                <p class="credit-text-xs">
                    Posted in <a class="text-pink-400" href="category/{{ article.category_id }}">
                        {{ article.category }}
                    </a>
                    by <a class="text-pink-400" href="user/{{ article.user_id }}">
                        {{ article.author }}
                    </a>
                </p>
                {%if (session.id == article.user_id)%}
                <p class="edit mt-4">
                    <a class="text-white bg-pink-600 hover:bg-blue-600 p-2 rounded-md mt-2" href="edit_article/{{article.id}}">Edit</a>
                </p>
            </article>
        {% endfor %}
    </section>
</main>
{% endblock %}
